- job:
    name: ScaleIO-Fuel-CI
    description: 'ScaleIO Fuel Plugin CI'
    defaults: global
    node: fuel-ci-slave
    parameters:
      - choice:
          name: FUEL_VERSION
          description: "Version of the FUEL to test"
          choices:
            - '9.0'
            - '8.0'
            - '7.0'
            - '6.1'
      - choice:
          name: FUEL_CHECKS
          description: "What tests should be run"
          choices:
            - 'bvt'
            - 'full'
            - 'bvt_skip_openstack'
            - 'full_skip_openstack'
      - choice:
          name: PUPPETS_VERSION
          description: "Version of the puppets(scaleio, scaleio_openstack) to download"
          choices:
            - 'master'
            - 'v1.0.0'
            - 'v1.0.1'
      - choice:
          name: PLUGIN_VERSION
          description: "Version of the fuel plugin to download (auto - branch according to fuel version, or specific branch/tag)"
          choices:
            - 'auto'
            - 'master'
            - 'fuel-package-v2'
            - 'v2.0.0'
            - 'v2.0.1'
            - 'v2.1.0'
            - 'v2.1.1'
      - string:
          name: FUEL_NODES
          default: '6'
      - choice:
          name: CLEAN_ENV
          description: "Cleanup environment policy (auto - cleanup before and after except errors)"
          choices:
            - 'auto'
            - 'before_only'
            - 'never'
    scm:
      - jenkins-scripts
      - fuel-kvm
    builders:
      - shell: |
          #!/bin/bash -e
          ./jenkins-scripts/fuel/run-scaleio.sh test-cluster-stub.sh
    publishers:
      - archive:
          artifacts: 'logs/**'
          allow-empty: 'true'
