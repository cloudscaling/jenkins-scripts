- job-template:
    name: ScaleIO-{check_name}
    defaults: global
    display-name: 'Deploys cluster with Juju and checks it'
    parameters:
      - bool:
          name: CLEAN_ENV
          default: true
    scm:
      - cs-juju-scaleio
      - jenkins-scripts
    builders:
      - shell: |
          #!/bin/bash -e
          {script}

- project:
   name: ScaleIO-checks
   check_name:
    - check-1-3-5-3:
       script: './jenkins-scripts/juju/run-scaleio.sh scaleio/deploy-check-mdm-cluster.sh'
    - Juju-check-parameters:
       script: './jenkins-scripts/juju/run-scaleio.sh scaleio/deploy-check-parameters.sh'
    - check-GW-haproxy:
       script: './jenkins-scripts/juju/run-scaleio.sh scaleio-gw-haproxy/deploy-check-haproxy.sh'
    - OpenStack-Manual-Liberty:
       script: './jenkins-scripts/juju/run-scaleio-openstack.sh deploy-manual.sh'
   jobs:
    - 'ScaleIO-{check_name}'
